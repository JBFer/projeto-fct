import React, { useState, useEffect } from 'react';
import { StatusBar } from 'expo-status-bar'
import { 
    StyleSheet,
    Text,
    View,
    Button,
    Switch,
    ScrollView,
    TextInput,
    TouchableOpacity
} from 'react-native';

import Theme from '../styles/Comum' 
import SettingsStyle from '../styles/SettingsStyle' 

import Icon from 'react-native-vector-icons/FontAwesome5'
import Icon2 from 'react-native-vector-icons/Ionicons'

import AsyncStorage from '@react-native-async-storage/async-storage';
import { useAsyncStorage } from '@react-native-async-storage/async-storage';


export default class App extends React.Component {
    
    state = {
        lightMode: true,
        isEnabled: false
    }

    switchToggler = () => {
        this.state.isEnabled === false ? this.setState({ isEnabled : true}) : this.setState({ isEnabled : false});
        this.state.lightMode === false ? this.setState({ lightMode : true}) : this.setState({ lightMode : false});
    };

    
    render(){
        return (
            <View style={ { flex: 1, backgroundColor: this.state.lightMode ? Theme.branco : Theme.backDark, flexDirection: 'column', alignItems: 'center', justifyContent: 'center' } }>
                <StatusBar style={'light'} />
                <Switch
                    style={[ { marginTop: 30 } , { backgroundColor: this.state.lightMode ? Theme.branco : Theme.backDark }]}
                    trackColor={{ false: "#767577", true: "#00C0F9" }}
                    thumbColor={this.state.isEnabled ? "#04d9ff" : "#f4f3f4"}
                    onValueChange={this.switchToggler}
                    value={this.state.isEnabled}
                />
                <Text style={[ SettingsStyle.title, { color: this.state.lightMode ? Theme.preto : Theme.branco } ]}>Settings</Text>
            </View>
        )
    
}
}







    const STORAGE_KEY = '@save_lightMode'
    
    const [lightMode, setlightMode] = useState()
    const [isEnabled, setIsEnabled] = useState(false)
    
    
    const lerData = async() => {
        try {
            const themeMode = await AsyncStorage.getItem(STORAGE_KEY)
            
            if (themeMode == null && setlightMode == null) {
                setlightMode(true)
                console.warn(themeMode + ' entrou no primeiro')
            } else {
                themeMode == false ? setlightMode(true) : setlightMode(false);
                console.warn(themeMode + ' entrou no segundo')
            }
                
            
        } catch (e) {
            alert('Failed to fetch the data from storage')
        }
    }
    
    const saveData = async() => {
        try {
            await AsyncStorage.setItem(STORAGE_KEY, JSON.stringify(lightMode))
            alert('Data successfully saved')
        } catch (e) {
            alert(e)
        }
    }
    
    const clearStorage = async () => {
        try {
            await AsyncStorage.clear()
            alert('Storage successfully cleared!')
        } catch (e) {
            alert('Failed to clear the async storage.')
        }
    }
    
    const switchToggler = () => {
        isEnabled === false ? setIsEnabled(true) : setIsEnabled(false);
        lightMode === false ? setlightMode(true) : setlightMode(false);
        saveData()
    };
    
    useEffect(() => {
        lerData()
    })
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    import React, { useState, useEffect } from 'react';
import { StatusBar } from 'expo-status-bar'
import { 
    StyleSheet,
    Text,
    View,
    Button,
    Switch,
    ScrollView,
    TextInput,
    TouchableOpacity
} from 'react-native';

import Theme from '../styles/Comum' 
import SettingsStyle from '../styles/SettingsStyle' 

import Icon from 'react-native-vector-icons/FontAwesome5'
import Icon2 from 'react-native-vector-icons/Ionicons'

import AsyncStorage from '@react-native-async-storage/async-storage';
import { useAsyncStorage } from '@react-native-async-storage/async-storage';

export default function App() {
    
    const [lightMode, setLightMode] = useState(true)
    
    const changeTheme = async() => {
        lightMode ? setLightMode(false) : setLightMode(true)
        await AsyncStorage.setItem('umaVariavel', JSON.stringify(lightMode))
    }
    
    const showTheme = async() => {
        console.warn(JSON.parse(await AsyncStorage.getItem('umaVariavel')))
    }
    
    const cleanTheme = async() => {
        await AsyncStorage.clear()
    }
    
    
    return (
        <View> 
            <TouchableOpacity onPress={ changeTheme }>
                <Text>Ao clicar aqui muda o theme</Text>
            </TouchableOpacity>
            <Text>Aqui diz qual é o Theme: {lightMode ? 'preto' : 'branco'}</Text>
            <Text>Aqui diz qual é o lightMode: {lightMode ? 'true' : 'false'}</Text>
            <TouchableOpacity onPress={ cleanTheme }>
                <Text>Ao clicar aqui limpa o theme</Text>
            </TouchableOpacity>
            <TouchableOpacity onPress={ showTheme }>
                <Text>Ao clicar aqui mostra o theme em cache</Text>
            </TouchableOpacity>
        </View>
    )
    
}







import React, { useState, useEffect } from 'react';
import { StatusBar } from 'expo-status-bar'
import { 
    StyleSheet,
    Text,
    View,
    Button,
    Switch,
    ScrollView,
    TextInput,
    TouchableOpacity
} from 'react-native';

import Theme from '../styles/Comum' 
import SettingsStyle from '../styles/SettingsStyle' 

import Icon from 'react-native-vector-icons/FontAwesome5'
import Icon2 from 'react-native-vector-icons/Ionicons'

import AsyncStorage from '@react-native-async-storage/async-storage';
import { useAsyncStorage } from '@react-native-async-storage/async-storage';

export default function App() {
    
    const STORAGE_KEY = '@save_lightMode'
    
    const [lightMode, setlightMode] = useState()
    const [isEnabled, setIsEnabled] = useState(false)
    
    
    const lerData = async() => {
        try {
            const themeMode = await AsyncStorage.getItem(STORAGE_KEY)
            
            if (themeMode == null && lightMode == null) {
                setlightMode(true)
            } else {
                setlightMode(themeMode)
            }
                
            
        } catch (e) {
            alert('Failed to fetch the data from storage')
        }
    }
    
    const saveData = async() => {
        try {
            await AsyncStorage.setItem(STORAGE_KEY, JSON.stringify(lightMode))
            alert('Data successfully saved')
        } catch (e) {
            alert(e)
        }
    }
    
    const clearStorage = async () => {
        try {
            await AsyncStorage.clear()
            alert('Storage successfully cleared!')
        } catch (e) {
            alert('Failed to clear the async storage.')
        }
    }
    
    const switchToggler = () => {
        isEnabled === false ? setIsEnabled(true) : setIsEnabled(false);
        lightMode === false ? setlightMode(true) : setlightMode(false);
        saveData()
    };
    
    useEffect(() => {
        lerData()
    }, [])
    
    
    return (
        <View style={ { flex: 1, backgroundColor: lightMode ? Theme.branco : Theme.backDark, flexDirection: 'column', alignItems: 'center', justifyContent: 'center' } }>
        <StatusBar style={'light'} />
            <Switch
                style={[ { marginTop: 30 } , { backgroundColor: lightMode ? Theme.branco : Theme.backDark }]}
                trackColor={{ false: "#767577", true: "#00C0F9" }}
                thumbColor={isEnabled ? "#04d9ff" : "#f4f3f4"}
                onValueChange={switchToggler}
                value={isEnabled}
            />
            <Text style={[ SettingsStyle.title, { color: lightMode ? Theme.preto : Theme.branco } ]}>Settings</Text>
        
        <TouchableOpacity onPress={clearStorage}>
            <Text>Limpar</Text>
        </TouchableOpacity>
        </View>
    );
    
}

-----------------------------------------------------------------------------------------------------------------------------------------



FILTER



PRICE PART


<View style={ FilterStyle.pricePart }>
    <Text style={ [FilterStyle.secondaryTxt, { color: this.props.themeMode ? Theme.preto : Theme.branco } ]}>Preço</Text>
    <Slider
        style={{ width: 300}}
            step={5}
            minimumValue={this.state.minPrice}
            maximumValue={this.state.maxPrice}
            value={this.state.price}
            onValueChange={val => this.setState({ price: val })}
            maximumTrackTintColor='#04d9ff' 
            minimumTrackTintColor='#00C0F9'
    />
</View>
<View style={ FilterStyle.rangePrice }>
    <Text style={{ color: this.props.themeMode ? Theme.preto : Theme.branco }}>{this.state.minPrice}€</Text>
    <Text style={{ color: this.props.themeMode ? Theme.preto : Theme.branco }}>{this.state.price}€</Text>
    <Text style={{ color: this.props.themeMode ? Theme.preto : Theme.branco }}>{this.state.maxPrice}€</Text>
</View>





